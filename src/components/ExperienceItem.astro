---
import { Picture } from "astro:assets";
import { Experience } from "../scripts/models/experience";
import { GetMonthYear, GetMonths } from "../scripts/utils.ts";
interface Props {
	experience: Experience;
}

const { experience } = Astro.props;
---

<div class="flex flex-row flex-wrap w-full">
	<div class="w-full inline-block dark:brightness-50 dark:hover:brightness-100">
		<div
			class="flex justify-center w-full rounded-t-lg"
			style={"background-color:" + experience.logo.background + ";background-size:auto;"}
		>
			{
				experience.url ? (
					<a
						href={experience.url}
						target="_blank"
						rel="noopener"
						title={experience.title}
						class="flex justify-center w-full h-full"
					>
						<Picture
							src={experience.logo.url}
							formats={["webp"]}
							widths={[100]}
							alt={experience.logo.alt}
							class="flex object-contain rounded-lg lg:rounded-l-lg w-100pixel h-100pixel"
							loading="lazy"
							title={experience.logo.alt}
							width="100"
							height="100"
							style={"backgroundColor:" + experience.logo.background}
						/>
					</a>
				) : (
					<Picture
						src={experience.logo.url}
						formats={["webp"]}
						widths={[100]}
						alt={experience.logo.alt}
						class="flex object-contain rounded-lg lg:rounded-l-lg w-100pixel h-100pixel"
						loading="lazy"
						title={experience.logo.alt}
						width="100"
						height="100"
						style={"backgroundColor:" + experience.logo.background}
					/>
				)
			}
		</div>
		<div
			class="w-full px-4 py-2 text-white uppercase rounded-b-lg text-sm text-right opacity-75"
			style={"background-color:" + experience.logo.background + ";background-size:auto;"}
		>
			<div class="text-white" style={"color:" + experience.logo.foreground}>
				{experience.isCurrent ? <span>CURRENT</span> : <span>{GetMonthYear(experience.to)}</span>}
				 -
				{GetMonthYear(experience.from)}
				{
					GetMonths(experience.from, experience.to) != "0 months" ? (
						<div class="text-xs">{GetMonths(experience.from, experience.to)}</div>
					) : (
						<div />
					)
				}
			</div>
		</div>
	</div>
	<div class="w-full h-full mt-2">
		<h3 class="mb-1 text-lg font-bold text-white dark:text-cool">
			{experience.job}
		</h3>
		<h4 class="mb-1 text-sm text-iron dark:text-cool">
			{experience.title}
		</h4>
	</div>
</div>
